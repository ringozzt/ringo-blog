# React15 到 16

### 架构变化

引入 **Scheduler**（调度器），将**递归的无法中断的更新**重构为**异步的可中断更新**

### 生命周期变化

#### v16 的生命周期

新的生命周期在流程方面，仍然遵循“挂载”、“更新”、“卸载”这三个广义的划分方式。它们分别对应到：

- 挂载过程：
  - **constructor**
  - **getDerivedStateFromProps**
  - **render**
  - **componentDidMount**
- 更新过程：
  - **getDerivedStateFromProps**
  - **shouldComponentUpdate**
  - **render**
  - **getSnapshotBeforeUpdate**
  - **componentDidUpdate**
- 卸载过程：
  - **componentWillUnmount**

#### 废弃了 v15 中的

**componentWillMount**

**componentWillReceiveProps**

**componentWillUpdate**

**getSnapshotBeforeUpdate**

[React 废弃了哪些生命周期？为什么？](https://juejin.cn/post/6941546135827775525#heading-55)

### Error Boundaries

React 16 开始，引入了 Error Boundaries 概念，它可以捕获它的子组件中产生的错误，记录错误日志，并展示降级内容，详见 [官网 Error Boundaries](https://zh-hans.reactjs.org/docs/error-boundaries.html#introducing-error-boundaries)

### React.Suspense 和 React.lazy

[精读《Suspense 改变开发方式》](https://juejin.cn/post/6844904093463363591)

[Suspense 对 React 的意义](https://juejin.cn/post/7062188906464149518)
