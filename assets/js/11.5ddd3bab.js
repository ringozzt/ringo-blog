(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{563:function(e,t,r){"use strict";r.r(t);var n=r(13),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"长列表问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#长列表问题"}},[e._v("#")]),e._v(" 长列表问题")]),e._v(" "),r("p",[e._v("不通过分页，怎么处理长列表呢？")]),e._v(" "),r("h2",{attrs:{id:"无限滚动-分片渲染思路"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#无限滚动-分片渲染思路"}},[e._v("#")]),e._v(" 无限滚动：分片渲染思路")]),e._v(" "),r("h3",{attrs:{id:"基础版"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基础版"}},[e._v("#")]),e._v(" 基础版：")]),e._v(" "),r("p",[r("strong",[e._v("时间分片+DocumentFragment")])]),e._v(" "),r("p",[e._v("关键的API有：requestAnimationFrame，document.createDocumentFragment、Intersection Observer")]),e._v(" "),r("blockquote",[r("p",[e._v("DocumentFragment，文档片段接口，表示一个没有父级文件的最小文档对象。它被作为一个轻量版的Document使用，用于存储已排好版的或尚未打理好格式的XML片段。最大的区别是因为DocumentFragment不是真实DOM树的一部分，它的变化不会触发DOM树的（重新渲染) ，且不会导致性能等问题。\n可以使用document.createDocumentFragment方法或者构造函数来创建一个空的DocumentFragment")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame",target:"_blank",rel:"noopener noreferrer"}},[e._v("MDN-window.requestAnimationFrame"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/DocumentFragment",target:"_blank",rel:"noopener noreferrer"}},[e._v("MDN-DocumentFragment"),r("OutboundLink")],1)])]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://juejin.cn/post/6844903938894872589",target:"_blank",rel:"noopener noreferrer"}},[e._v("时间分片渲染长列表"),r("OutboundLink")],1)])]),e._v(" "),r("h3",{attrs:{id:"升级版"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#升级版"}},[e._v("#")]),e._v(" 升级版：")]),e._v(" "),r("p",[r("strong",[e._v("使用webWorker接收数据，避免阻塞JS主线程；indexedDB存放大量数据")])]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://juejin.cn/post/6990596611189506062",target:"_blank",rel:"noopener noreferrer"}},[e._v("webworker+indexedDB实现长列表"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2018/07/web-worker.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("webWorker怎么使用"),r("OutboundLink")],1)])]),e._v(" "),r("hr"),e._v(" "),r("h2",{attrs:{id:"固定区域-监听滚动、动态切换内容"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#固定区域-监听滚动、动态切换内容"}},[e._v("#")]),e._v(" 固定区域：监听滚动、动态切换内容")]),e._v(" "),r("h3",{attrs:{id:"基础版-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基础版-2"}},[e._v("#")]),e._v(" 基础版：")]),e._v(" "),r("p",[e._v('关键的API有：slice、translate3d(0,${this.startOffset}px,0)、@scroll="scrollEvent($event)"')]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://juejin.cn/post/6844903982742110216",target:"_blank",rel:"noopener noreferrer"}},[e._v("监听滚动、偏移量实现虚拟列表"),r("OutboundLink")],1)])]),e._v(" "),r("h3",{attrs:{id:"升级版-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#升级版-2"}},[e._v("#")]),e._v(" 升级版：")]),e._v(" "),r("p",[e._v("Intersection Observer这种异步查询替代scrollTop减少dom查询开销")]),e._v(" "),r("blockquote",[r("p",[e._v("这个长列表优化渲染方案优先是基于 "),r("code",[e._v("intersectionObserver")]),e._v(" + "),r("code",[e._v("padding")]),e._v("进行异步加载数据，以及润滑剂基于"),r("code",[e._v("scroll")]),e._v(" + "),r("code",[e._v("padding")]),e._v("进行同步加载数据来完成的，具体步骤除了一开始获取首项item的方式不同，其它的步骤一致，均为取消监听 旧的首末项， 绑定监听新的首末项，然后对容器添加"),r("code",[e._v("padding")]),e._v("。在实现正常的滑动的基础上，能够让用户的一些大幅度的举动也能满足要求")])]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://juejin.cn/post/6844904185830473736",target:"_blank",rel:"noopener noreferrer"}},[e._v("值得学一波-小书包酱"),r("OutboundLink")],1)])]),e._v(" "),r("hr"),e._v(" "),r("p",[e._v("参考文章")]),e._v(" "),r("ol",[r("li",[r("a",{attrs:{href:"https://juejin.cn/post/6844904008667103240",target:"_blank",rel:"noopener noreferrer"}},[e._v("长列表优化"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://juejin.cn/post/6844904009568878600",target:"_blank",rel:"noopener noreferrer"}},[e._v("一个简洁、有趣的无限下拉方案"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://juejin.cn/post/6995334008603148295",target:"_blank",rel:"noopener noreferrer"}},[e._v("前端长列表渲染优化实战"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=a.exports}}]);